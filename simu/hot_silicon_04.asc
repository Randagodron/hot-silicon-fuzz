Version 4
SHEET 1 2620 884
WIRE 1696 -656 1696 -704
WIRE 1824 -656 1824 -704
WIRE 1696 -544 1696 -576
WIRE 1920 -544 1696 -544
WIRE 2240 -544 2000 -544
WIRE 1696 -512 1696 -544
WIRE 1824 -512 1824 -576
WIRE 1936 -480 1936 -496
WIRE 1936 -480 1920 -480
WIRE 1984 -480 1984 -496
WIRE 2032 -480 1984 -480
WIRE 2048 -480 2032 -480
WIRE 1920 -416 1920 -480
WIRE 1936 -416 1920 -416
WIRE 2032 -416 2032 -480
WIRE 2032 -416 2016 -416
WIRE 1824 -320 1824 -448
WIRE 2048 -320 1824 -320
WIRE 2240 -320 2240 -544
WIRE 2240 -320 2128 -320
WIRE 320 -256 256 -256
WIRE 512 -256 320 -256
WIRE 736 -256 512 -256
WIRE 960 -256 736 -256
WIRE 1216 -256 960 -256
WIRE 1376 -256 1216 -256
WIRE 2064 -256 2064 -272
WIRE 2064 -256 2048 -256
WIRE 2112 -256 2112 -272
WIRE 2160 -256 2112 -256
WIRE 2176 -256 2160 -256
WIRE 1824 -240 1824 -320
WIRE 2240 -240 2240 -320
WIRE 1632 -224 1568 -224
WIRE 1696 -224 1696 -448
WIRE 1568 -208 1568 -224
WIRE 1632 -208 1632 -224
WIRE 1648 -208 1632 -208
WIRE 960 -192 960 -256
WIRE 1216 -192 1216 -256
WIRE 2048 -192 2048 -256
WIRE 2064 -192 2048 -192
WIRE 2160 -192 2160 -256
WIRE 2160 -192 2144 -192
WIRE -480 -176 -480 -208
WIRE -352 -176 -352 -208
WIRE -128 -176 -128 -208
WIRE 1648 -160 1632 -160
WIRE 1824 -128 1824 -160
WIRE 1952 -128 1888 -128
WIRE 2240 -128 2240 -160
WIRE 2432 -128 2240 -128
WIRE 1376 -112 1376 -256
WIRE 1568 -112 1568 -128
WIRE 1632 -112 1632 -160
WIRE 1632 -112 1568 -112
WIRE 1888 -112 1888 -128
WIRE 1888 -112 1872 -112
WIRE 1952 -112 1952 -128
WIRE 320 -96 320 -256
WIRE 1632 -96 1632 -112
WIRE 2432 -96 2432 -128
WIRE 2240 -80 2240 -128
WIRE -480 -64 -480 -96
WIRE -352 -64 -352 -96
WIRE -128 -64 -128 -96
WIRE 1216 -64 1216 -112
WIRE 1312 -64 1216 -64
WIRE 1888 -64 1872 -64
WIRE 1216 -16 1216 -64
WIRE 1888 -16 1888 -64
WIRE 1952 -16 1952 -32
WIRE 1952 -16 1888 -16
WIRE 320 0 320 -32
WIRE 512 0 512 -256
WIRE 736 0 736 -256
WIRE 1888 0 1888 -16
WIRE 960 32 960 -112
WIRE 1152 32 960 32
WIRE 1376 32 1376 -16
WIRE 1424 32 1376 32
WIRE 1696 32 1696 -144
WIRE 1696 32 1488 32
WIRE 1824 32 1824 -48
WIRE 1824 32 1696 32
WIRE 2128 32 1824 32
WIRE 2240 32 2240 0
WIRE 2240 32 2208 32
WIRE 2432 32 2432 -16
WIRE 2528 32 2432 32
WIRE 1376 64 1376 32
WIRE 2240 64 2240 32
WIRE 2432 64 2432 32
WIRE 960 80 960 32
WIRE -144 112 -480 112
WIRE -96 112 -144 112
WIRE -16 112 -96 112
WIRE 288 112 64 112
WIRE 736 128 736 80
WIRE 800 128 736 128
WIRE 896 128 864 128
WIRE 288 144 288 112
WIRE 320 144 288 144
WIRE 448 144 384 144
WIRE 512 144 512 80
WIRE 512 144 448 144
WIRE 736 144 736 128
WIRE 256 160 48 160
WIRE 0 192 0 160
WIRE 0 192 -32 192
WIRE 512 192 512 144
WIRE 672 192 512 192
WIRE 1376 192 1376 144
WIRE 2240 192 2240 128
WIRE 2432 192 2432 144
WIRE 0 224 0 192
WIRE 128 224 48 224
WIRE 864 224 864 128
WIRE 1024 224 864 224
WIRE 1216 224 1216 80
WIRE 1216 224 1104 224
WIRE 320 240 288 240
WIRE 448 240 448 144
WIRE 448 240 384 240
WIRE 1216 256 1216 224
WIRE -96 272 -96 112
WIRE -16 272 -96 272
WIRE 288 272 288 240
WIRE 288 272 64 272
WIRE 512 288 512 192
WIRE 736 288 736 240
WIRE 960 288 960 176
WIRE 128 352 128 224
WIRE 256 352 256 160
WIRE 1216 384 1216 336
WIRE 1376 384 1216 384
WIRE 512 416 512 368
WIRE 736 416 736 368
WIRE 960 416 960 368
WIRE 1216 416 1216 384
WIRE -480 432 -480 112
WIRE 1376 432 1376 384
WIRE -384 448 -384 416
WIRE 128 480 128 432
WIRE 256 480 256 432
WIRE -480 544 -480 512
WIRE -224 544 -224 512
WIRE 1216 544 1216 496
WIRE 1216 672 1216 624
WIRE 1376 672 1376 496
FLAG -480 -208 vcc
FLAG -480 -64 0
FLAG -352 -64 0
FLAG 1216 672 0
FLAG 1376 672 0
FLAG 1376 192 0
FLAG 320 0 0
FLAG 256 -256 vcc
FLAG 512 416 0
FLAG 736 416 0
FLAG 960 416 0
FLAG 1696 -704 0
FLAG 2240 192 0
FLAG 2432 192 0
FLAG 2528 32 out
FLAG -384 448 0
FLAG -224 544 0
FLAG -352 -208 vsin
FLAG -128 -64 0
FLAG -128 -208 venv
FLAG -480 544 0
FLAG -32 192 0
FLAG 128 480 0
FLAG 256 480 0
FLAG 1824 -704 0
FLAG 1632 -96 0
FLAG 1888 0 0
FLAG 2048 -480 0
FLAG 2176 -256 0
FLAG -144 112 in
SYMBOL voltage -480 -192 R0
SYMATTR InstName VCC
SYMATTR Value 9
SYMBOL voltage -352 -192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VIN_SIN
SYMATTR Value SINE(0 50m 1k)
SYMBOL res 496 -16 R0
SYMATTR InstName R1
SYMATTR Value 150k
SYMBOL res 496 272 R0
SYMATTR InstName R2
SYMATTR Value 22k
SYMBOL cap 304 -96 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL cap 384 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL cap 384 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 720 -16 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 720 272 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL cap 864 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res 1120 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL res 944 -208 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 944 272 R0
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 1200 -208 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1200 240 R0
SYMATTR InstName R9
SYMATTR Value R=1k*(1-GAIN)
SYMBOL res 1200 400 R0
SYMATTR InstName R10
SYMATTR Value R=1k*GAIN
SYMBOL res 1200 528 R0
SYMATTR InstName R11
SYMATTR Value R=50k*BIAS
SYMBOL res 1360 48 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL cap 1488 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL res 1680 -672 R0
SYMATTR InstName R14
SYMATTR Value 22k
SYMBOL res 2224 -256 R0
SYMATTR InstName R15
SYMATTR Value R=50k*(1-TONE)
SYMBOL res 2224 -96 R0
SYMATTR InstName R16
SYMATTR Value R=50k*TONE
SYMBOL res 2416 -112 R0
SYMATTR InstName R17
SYMATTR Value R=50k*(1-VOL)
SYMBOL res 2416 48 R0
SYMATTR InstName R18
SYMATTR Value R=50k*VOL
SYMBOL cap 1712 -448 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 4n7
SYMBOL cap 1360 432 R0
SYMATTR InstName C7
SYMATTR Value 4.7µ
SYMBOL npn 672 144 R0
SYMATTR InstName Q1
SYMATTR Value Qmmbt5089l
SYMBOL npn 896 80 R0
SYMATTR InstName Q2
SYMATTR Value Qmmbt5089l
SYMBOL npn 1152 -16 R0
SYMATTR InstName Q3
SYMATTR Value Qmmbt5089l
SYMBOL npn 1312 -112 R0
SYMATTR InstName Q4
SYMATTR Value Qmmbt5089l
SYMBOL res 2224 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 33k
SYMBOL cap 2224 64 R0
SYMATTR InstName C8
SYMATTR Value 10n
SYMBOL voltage -384 320 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 100m
SYMATTR InstName V1
SYMATTR Value ""
SYMBOL voltage -224 416 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 wavefile=.\guit_sample_01.wav chan=0
SYMATTR InstName V2
SYMATTR Value ""
SYMBOL voltage -128 -192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VIN_ENV
SYMATTR Value PWL(0 0 200m 1)
SYMBOL bv -480 416 R0
SYMATTR InstName B1
SYMATTR Value V=V(venv)*V(vsin)
SYMBOL sw -32 112 R270
SYMATTR InstName S1
SYMATTR Value myswitch
SYMBOL sw -32 272 M90
SYMATTR InstName S2
SYMATTR Value myswitch
SYMBOL bv 128 336 R0
SYMATTR InstName B2
SYMATTR Value V=FAT
SYMBOL bv 256 336 R0
SYMATTR InstName B3
SYMATTR Value V=1-FAT
SYMBOL sw 1696 -128 M180
SYMATTR InstName S3
SYMATTR Value myswitch
SYMBOL res 1808 -672 R0
SYMATTR InstName R13
SYMATTR Value 2k2
SYMBOL cap 1840 -448 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL res 1808 -256 R0
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL sw 1824 -32 R180
SYMATTR InstName S4
SYMATTR Value myswitch
SYMBOL sw 2016 -544 M270
SYMATTR InstName S5
SYMATTR Value myswitch
SYMBOL sw 2144 -320 M270
SYMATTR InstName S6
SYMATTR Value myswitch
SYMBOL bv 1568 -224 M0
SYMATTR InstName B4
SYMATTR Value V=CHARACTER
SYMBOL bv 1920 -416 M90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B5
SYMATTR Value V=CHARACTER
SYMBOL bv 1952 -128 R0
SYMATTR InstName B6
SYMATTR Value V=1-CHARACTER
SYMBOL bv 2048 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName B7
SYMATTR Value V=1-CHARACTER
TEXT 800 -592 Left 2 !.param GAIN=0.5
TEXT 800 -568 Left 2 !.param VOL=0.3
TEXT 800 -544 Left 2 !.param TONE=0.5
TEXT 800 -520 Left 2 !.param BIAS=0.9
TEXT 800 -352 Left 2 !.tran 200m
TEXT 800 -328 Left 2 !;.wave .\\hot_silicon.wav 16 44100 V(out)
TEXT 800 -376 Left 2 !;.ac oct 20 10 30k
TEXT 0 -616 Left 2 !.MODEL Qmmbt5089l npn\n+IS=1.84669e-13 BF=1409.89 NF=1.03708 VAF=12.3022\n+IKF=0.119779 ISE=2.83298e-11 NE=2.69107 BR=29.9731\n+NR=1.01645 VAR=33.0833 IKR=1.19779 ISC=1e-16\n+NC=1.02359 RB=6.69269 IRB=0.1 RBM=0.1\n+RE=0.210278 RC=1.05139 XTB=1.24777 XTI=3.77926\n+EG=1.206 CJE=8.0829e-12 VJE=0.450872 MJE=0.339997\n+TF=2.69028e-10 XTF=1000 VTF=1166.16 ITF=1.92317\n+CJC=5.15052e-12 VJC=0.463816 MJC=0.363265 XCJC=0.829786\n+FC=0.8 CJS=0 VJS=0.75 MJS=0.5\n+TR=1e-07 PTF=0 KF=0 AF=1
TEXT 800 -456 Left 2 !.param FAT=0
TEXT 800 -432 Left 2 !.param CHARACTER=0
TEXT 0 -656 Left 2 !.model myswitch SW(Ron=0.001 Roff=100MEG Vt=0.5 Lser=0 Vser=0)
TEXT 1144 -432 Left 2 !.step param GAIN list 0.01 0.5 0.99
